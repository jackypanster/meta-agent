---
description:
globs:
alwaysApply: false
---
# ğŸ§ª Testing Rules - Fail-Fast Verification

## **æµ‹è¯•åŸåˆ™**

- **âœ… DO**: æµ‹è¯•æ‰€æœ‰å¼‚å¸¸éƒ½è¢«æ­£ç¡®æŠ›å‡º
- **âœ… DO**: éªŒè¯ä»»ä½•é”™è¯¯æƒ…å†µéƒ½å¯¼è‡´ç¨‹åºç«‹å³å¤±è´¥  
- **âœ… DO**: æµ‹è¯•å…·ä½“çš„é”™è¯¯ä¿¡æ¯å†…å®¹
- **âœ… DO**: éªŒè¯ç¨‹åºåœ¨å¼‚å¸¸æ—¶ç«‹å³ç»ˆæ­¢
- **âŒ DON'T**: æµ‹è¯•ä»»ä½•fallbackæˆ–é»˜è®¤å€¼è¡Œä¸º
- **âŒ DON'T**: ç¼–å†™æµ‹è¯•æ¥éªŒè¯"å®¹é”™"æˆ–"å¥å£®æ€§"ä»£ç 
- **âŒ DON'T**: æµ‹è¯•å¼‚å¸¸è¢«"ä¼˜é›…å¤„ç†"çš„æƒ…å†µ

## **æ¨èæµ‹è¯•æ¨¡å¼**

```python
# âœ… GOOD: æµ‹è¯•æ‰€æœ‰å¼‚å¸¸è¡Œä¸º
def test_missing_config_raises_error():
    with pytest.raises(ConfigurationError, match="âŒ .envæ–‡ä»¶ä¸å­˜åœ¨"):
        validate_config()

def test_invalid_api_key_fails_fast():
    with pytest.raises(APIConnectionError):
        create_llm_config()

def test_file_not_found_fails_immediately():
    with pytest.raises(FileNotFoundError):
        load_required_file("nonexistent.txt")

def test_json_parse_error_fails_immediately():
    with pytest.raises(json.JSONDecodeError):
        parse_json_data("invalid json")

def test_database_error_fails_immediately():
    with pytest.raises(DatabaseError):
        get_user_by_id(999999)

# âŒ BAD: æµ‹è¯•ä»»ä½•å½¢å¼çš„é”™è¯¯å¤„ç†
def test_fallback_returns_default():
    # è¿™ç§æµ‹è¯•é¼“åŠ±é”™è¯¯è®¾è®¡ï¼
    assert get_value_with_fallback("missing", "default") == "default"

def test_graceful_error_handling():
    # ä»»ä½•"ä¼˜é›…"å¤„ç†éƒ½æ˜¯é”™è¯¯çš„ï¼
    result = safe_operation_that_might_fail()
    assert result is not None
```

å‚è€ƒ [fail-fastè§„åˆ™](mdc:.cursor/rules/fail_fast.mdc) äº†è§£å®Œæ•´çš„å¼‚å¸¸å¤„ç†å‡†åˆ™ã€‚
