{
  "audit_timestamp": "2025-06-16T19:58:22.762543",
  "project_root": "/Users/zhibinpan/workspace/meta-agent",
  "summary": {
    "total_exception_handlers": 30,
    "total_fallback_patterns": 4,
    "files_with_exceptions": 7,
    "files_with_fallbacks": 4
  },
  "exception_handlers": [
    {
      "file_path": "/Users/zhibinpan/workspace/meta-agent/tests/test_fail_fast_validation.py",
      "line_number": 47,
      "column": 12,
      "handler_type": "try-finally",
      "exception_types": [],
      "has_bare_except": false,
      "has_finally": true,
      "code_snippet": "try:\n                with pytest.raises(ConfigError) as exc_info:\n                    Config(f.name)\n                \n                assert \"æ ¼å¼é”™è¯¯\" in str(exc_info.value)\n            finally:\n                os.unlink(f.name)",
      "function_name": "test_malformed_env_file_fails_immediately",
      "class_name": "TestConfigurationFailFast"
    },
    {
      "file_path": "/Users/zhibinpan/workspace/meta-agent/tests/test_fail_fast_validation.py",
      "line_number": 61,
      "column": 12,
      "handler_type": "try-finally",
      "exception_types": [],
      "has_bare_except": false,
      "has_finally": true,
      "code_snippet": "try:\n                config = Config(f.name)\n                \n                # æµ‹è¯•getæ–¹æ³•å¯¹ä¸å­˜åœ¨çš„é”®ç«‹å³å¤±è´¥\n                with pytest.raises(ConfigError) as exc_info:\n                    config.get('NONEXISTENT_KEY')\n                assert \"ä¸å­˜åœ¨\" in str(exc_info.value)\n                \n                # æµ‹è¯•requireæ–¹æ³•å¯¹ä¸å­˜åœ¨çš„é”®ç«‹å³å¤±è´¥\n                with pytest.raises(ConfigError) as exc_info:\n                    config.require('MISSING_REQUIRED_KEY')\n                assert \"ç¼ºå°‘å¿…éœ€çš„é…ç½®\" in str(exc_info.value)\n                \n            finally:\n                os.unlink(f.name)",
      "function_name": "test_missing_required_config_fails_immediately",
      "class_name": "TestConfigurationFailFast"
    },
    {
      "file_path": "/Users/zhibinpan/workspace/meta-agent/tests/test_fail_fast_validation.py",
      "line_number": 83,
      "column": 12,
      "handler_type": "try-finally",
      "exception_types": [],
      "has_bare_except": false,
      "has_finally": true,
      "code_snippet": "try:\n                config = Config(f.name)\n                \n                with pytest.raises(ConfigError) as exc_info:\n                    config.get_bool('NONEXISTENT_BOOL_KEY')\n                assert \"ä¸å­˜åœ¨\" in str(exc_info.value)\n                \n            finally:\n                os.unlink(f.name)",
      "function_name": "test_get_bool_missing_key_fails_immediately",
      "class_name": "TestConfigurationFailFast"
    },
    {
      "file_path": "/Users/zhibinpan/workspace/meta-agent/tests/test_fail_fast_validation.py",
      "line_number": 120,
      "column": 12,
      "handler_type": "try-finally",
      "exception_types": [],
      "has_bare_except": false,
      "has_finally": true,
      "code_snippet": "try:\n                # ä½¿ç”¨ä¸å­˜åœ¨çš„schemaæ–‡ä»¶\n                loader = MCPConfigLoader(config_f.name, \"nonexistent_schema.json\")\n                \n                # å°è¯•åŠ è½½é…ç½®åº”è¯¥åœ¨schemaéªŒè¯æ—¶å¤±è´¥\n                with pytest.raises(MCPConfigError) as exc_info:\n                    loader.load_config()\n                \n                assert \"JSON Schemaæ–‡ä»¶ä¸å­˜åœ¨\" in str(exc_info.value)\n                \n            finally:\n                os.unlink(config_f.name)",
      "function_name": "test_missing_schema_file_fails_immediately",
      "class_name": "TestMCPConfigurationFailFast"
    },
    {
      "file_path": "/Users/zhibinpan/workspace/meta-agent/tests/test_fail_fast_validation.py",
      "line_number": 139,
      "column": 12,
      "handler_type": "try-finally",
      "exception_types": [],
      "has_bare_except": false,
      "has_finally": true,
      "code_snippet": "try:\n                loader = MCPConfigLoader(f.name, \"nonexistent_schema.json\")\n                \n                with pytest.raises(json.JSONDecodeError):\n                    loader.load_config()\n                    \n            finally:\n                os.unlink(f.name)",
      "function_name": "test_invalid_json_config_fails_immediately",
      "class_name": "TestMCPConfigurationFailFast"
    },
    {
      "file_path": "/Users/zhibinpan/workspace/meta-agent/tests/test_fail_fast_validation.py",
      "line_number": 291,
      "column": 12,
      "handler_type": "try-finally",
      "exception_types": [],
      "has_bare_except": false,
      "has_finally": true,
      "code_snippet": "try:\n                config = Config(f.name)\n                \n                # ç¡®ä¿getæ–¹æ³•å¯¹ä¸å­˜åœ¨çš„é”®æŠ›å‡ºå¼‚å¸¸ï¼Œè€Œä¸æ˜¯è¿”å›é»˜è®¤å€¼\n                with pytest.raises(ConfigError):\n                    config.get('NONEXISTENT_KEY')\n                \n                # ç¡®ä¿requireæ–¹æ³•å¯¹ä¸å­˜åœ¨çš„é”®æŠ›å‡ºå¼‚å¸¸\n                with pytest.raises(ConfigError):\n                    config.require('NONEXISTENT_KEY')\n                \n                # ç¡®ä¿get_boolæ–¹æ³•å¯¹ä¸å­˜åœ¨çš„é”®æŠ›å‡ºå¼‚å¸¸\n                with pytest.raises(ConfigError):\n                    config.get_bool('NONEXISTENT_KEY')\n                    \n            finally:\n                os.unlink(f.name)",
      "function_name": "test_no_default_values_in_config_get",
      "class_name": "TestNoFallbackMechanisms"
    },
    {
      "file_path": "/Users/zhibinpan/workspace/meta-agent/tests/test_prompt_config_validation.py",
      "line_number": 65,
      "column": 8,
      "handler_type": "try-except",
      "exception_types": [
        "ValidationError"
      ],
      "has_bare_except": false,
      "has_finally": false,
      "code_snippet": "try:\n            validate(instance=config_data, schema=self.schema)\n        except ValidationError as e:\n            pytest.fail(f\"ä¸»é…ç½®æ–‡ä»¶éªŒè¯å¤±è´¥: {e.message}\")",
      "function_name": "test_main_config_validation",
      "class_name": "TestPromptConfigValidation"
    },
    {
      "file_path": "/Users/zhibinpan/workspace/meta-agent/tests/test_prompt_config_validation.py",
      "line_number": 84,
      "column": 12,
      "handler_type": "try-except",
      "exception_types": [
        "ValidationError"
      ],
      "has_bare_except": false,
      "has_finally": false,
      "code_snippet": "try:\n                validate(instance=template_data, schema=self.schema)\n            except ValidationError as e:\n                pytest.fail(f\"æ¨¡æ¿æ–‡ä»¶ {template_file} éªŒè¯å¤±è´¥: {e.message}\")",
      "function_name": "test_template_files_validation",
      "class_name": "TestPromptConfigValidation"
    },
    {
      "file_path": "/Users/zhibinpan/workspace/meta-agent/tests/test_prompt_config_validation.py",
      "line_number": 102,
      "column": 12,
      "handler_type": "try-except",
      "exception_types": [
        "ValidationError"
      ],
      "has_bare_except": false,
      "has_finally": false,
      "code_snippet": "try:\n                validate(instance=locale_data, schema=self.schema)\n            except ValidationError as e:\n                pytest.fail(f\"å¤šè¯­è¨€æ–‡ä»¶ {locale}/{filename} éªŒè¯å¤±è´¥: {e.message}\")",
      "function_name": "test_locale_files_validation",
      "class_name": "TestPromptConfigValidation"
    },
    {
      "file_path": "/Users/zhibinpan/workspace/meta-agent/tests/test_prompt_config_validation.py",
      "line_number": 156,
      "column": 4,
      "handler_type": "try-except",
      "exception_types": [
        "AssertionError",
        "Exception"
      ],
      "has_bare_except": false,
      "has_finally": false,
      "code_snippet": "try:\n        test_instance.test_directory_structure_exists()\n        print(\"âœ… ç›®å½•ç»“æ„éªŒè¯é€šè¿‡\")\n        \n        test_instance.test_required_files_exist()\n        print(\"âœ… æ–‡ä»¶å­˜åœ¨æ€§éªŒè¯é€šè¿‡\")\n        \n        test_instance.test_main_config_validation()\n        print(\"âœ… ä¸»é…ç½®æ–‡ä»¶schemaéªŒè¯é€šè¿‡\")\n        \n        test_instance.test_template_files_validation()\n        print(\"âœ… æ¨¡æ¿æ–‡ä»¶schemaéªŒè¯é€šè¿‡\")\n        \n        test_instance.test_locale_files_validation()\n        print(\"âœ… å¤šè¯­è¨€æ–‡ä»¶schemaéªŒè¯é€šè¿‡\")\n        \n        test_instance.test_readme_content()\n        print(\"âœ… READMEå†…å®¹éªŒè¯é€šè¿‡\")\n        \n        test_instance.test_system_prompt_content_extracted()\n        print(\"âœ… ç³»ç»Ÿæç¤ºè¯å†…å®¹éªŒè¯é€šè¿‡\")\n        \n        print(\"\\nğŸ‰ å­ä»»åŠ¡14.1éªŒæ”¶æµ‹è¯•å…¨éƒ¨é€šè¿‡ï¼\")\n        \n    except AssertionError as e:\n        print(f\"âŒ éªŒè¯å¤±è´¥: {e}\")\n    except Exception as e:\n        print(f\"âŒ æµ‹è¯•è¿‡ç¨‹å‡ºé”™: {e}\")",
      "function_name": null,
      "class_name": null
    },
    {
      "file_path": "/Users/zhibinpan/workspace/meta-agent/tests/unit/test_mcp_watcher.py",
      "line_number": 174,
      "column": 8,
      "handler_type": "try-finally",
      "exception_types": [],
      "has_bare_except": false,
      "has_finally": true,
      "code_snippet": "try:\n            watcher = MCPConfigWatcher(config_path)\n            \n            # ç¬¬ä¸€æ¬¡å¯åŠ¨\n            result1 = watcher.start_watching()\n            assert result1\n            assert watcher.is_watching\n            \n            # ç¬¬äºŒæ¬¡å¯åŠ¨ï¼ˆåº”è¯¥è¿”å›Trueä½†ä¸é‡å¤å¯åŠ¨ï¼‰\n            result2 = watcher.start_watching()\n            assert result2\n            assert watcher.is_watching\n            \n            watcher.stop_watching()\n            \n        finally:\n            Path(config_path).unlink(missing_ok=True)",
      "function_name": "test_start_watching_already_watching",
      "class_name": "TestMCPConfigWatcher"
    },
    {
      "file_path": "/Users/zhibinpan/workspace/meta-agent/tests/unit/test_mcp_watcher.py",
      "line_number": 244,
      "column": 8,
      "handler_type": "try-finally",
      "exception_types": [],
      "has_bare_except": false,
      "has_finally": true,
      "code_snippet": "try:\n            watcher = MCPConfigWatcher(config_path)\n            callback = MagicMock()\n            watcher.add_callback(callback)\n            \n            info = watcher.get_config_info()\n            \n            assert info['config_path'] == str(Path(config_path).resolve())\n            assert info['is_watching'] == False\n            assert info['callbacks_count'] == 1\n            assert info['file_exists'] == True\n            assert info['file_size'] > 0\n            assert info['last_modified'] > 0\n            \n        finally:\n            Path(config_path).unlink(missing_ok=True)",
      "function_name": "test_get_config_info",
      "class_name": "TestMCPConfigWatcher"
    },
    {
      "file_path": "/Users/zhibinpan/workspace/meta-agent/tests/unit/test_mcp_watcher.py",
      "line_number": 267,
      "column": 8,
      "handler_type": "try-finally",
      "exception_types": [],
      "has_bare_except": false,
      "has_finally": true,
      "code_snippet": "try:\n            watcher = MCPConfigWatcher(config_path)\n            \n            with watcher:\n                assert watcher.is_watching\n            \n            assert not watcher.is_watching\n            \n        finally:\n            Path(config_path).unlink(missing_ok=True)",
      "function_name": "test_context_manager",
      "class_name": "TestMCPConfigWatcher"
    },
    {
      "file_path": "/Users/zhibinpan/workspace/meta-agent/tests/unit/test_mcp_watcher.py",
      "line_number": 316,
      "column": 8,
      "handler_type": "try-finally",
      "exception_types": [],
      "has_bare_except": false,
      "has_finally": true,
      "code_snippet": "try:\n            watcher = get_mcp_config_watcher(config_path)\n            watcher.start_watching()\n            \n            assert watcher.is_watching\n            \n            # é‡ç½®åº”è¯¥åœæ­¢ç›‘æ§\n            reset_mcp_config_watcher()\n            \n            # åŸç›‘æ§å™¨åº”è¯¥å·²åœæ­¢\n            assert not watcher.is_watching\n            \n        finally:\n            Path(config_path).unlink(missing_ok=True)",
      "function_name": "test_reset_watching_watcher",
      "class_name": "TestGlobalWatcher"
    },
    {
      "file_path": "/Users/zhibinpan/workspace/meta-agent/tests/unit/test_mcp_watcher.py",
      "line_number": 350,
      "column": 8,
      "handler_type": "try-finally",
      "exception_types": [],
      "has_bare_except": false,
      "has_finally": true,
      "code_snippet": "try:\n            watcher = MCPConfigWatcher(config_path)\n            callback_results = []\n            \n            def test_callback(config):\n                callback_results.append(config)\n            \n            watcher.add_callback(test_callback)\n            \n            # å¯åŠ¨ç›‘æ§\n            assert watcher.start_watching()\n            \n            # ç­‰å¾…ç›‘æ§å™¨å¯åŠ¨\n            time.sleep(0.1)\n            \n            # ä¿®æ”¹é…ç½®æ–‡ä»¶\n            modified_config = {\"version\": \"2.0\", \"servers\": {\"test\": {}}}\n            with open(config_path, 'w') as f:\n                json.dump(modified_config, f)\n            \n            # ç­‰å¾…æ–‡ä»¶ç³»ç»Ÿäº‹ä»¶å¤„ç†\n            time.sleep(2.0)\n            \n            # åœæ­¢ç›‘æ§\n            watcher.stop_watching()\n            \n            # éªŒè¯å›è°ƒè¢«è°ƒç”¨ï¼ˆå¯èƒ½éœ€è¦æ›´é•¿æ—¶é—´ï¼‰\n            # æ³¨æ„ï¼šåœ¨æŸäº›ç³»ç»Ÿä¸Šæ–‡ä»¶ç›‘æ§å¯èƒ½ä¸ä¼šç«‹å³è§¦å‘\n            # è¿™ä¸ªæµ‹è¯•ä¸»è¦éªŒè¯ç›‘æ§å™¨èƒ½æ­£å¸¸å¯åŠ¨å’Œåœæ­¢\n            \n        finally:\n            Path(config_path).unlink(missing_ok=True)",
      "function_name": "test_file_modification_detection",
      "class_name": "TestIntegration"
    },
    {
      "file_path": "/Users/zhibinpan/workspace/meta-agent/tests/unit/test_config.py",
      "line_number": 38,
      "column": 12,
      "handler_type": "try-finally",
      "exception_types": [],
      "has_bare_except": false,
      "has_finally": true,
      "code_snippet": "try:\n                config = Config(f.name)\n                \n                assert config.get('DEEPSEEK_API_KEY') == 'sk-test-123'\n                assert config.get('OPENROUTER_API_KEY') == 'sk-or-test-456'\n                assert config.get_bool('USE_DEEPSEEK_R1') is True\n                assert config.get_bool('DEBUG') is False\n                \n            finally:\n                os.unlink(f.name)",
      "function_name": "test_load_valid_env_file",
      "class_name": "TestConfig"
    },
    {
      "file_path": "/Users/zhibinpan/workspace/meta-agent/tests/unit/test_config.py",
      "line_number": 61,
      "column": 12,
      "handler_type": "try-finally",
      "exception_types": [],
      "has_bare_except": false,
      "has_finally": true,
      "code_snippet": "try:\n                config = Config(f.name)\n                \n                assert config.get('API_KEY_1') == 'sk-test-with-double-quotes'\n                assert config.get('API_KEY_2') == 'sk-test-with-single-quotes'\n                assert config.get('NORMAL_KEY') == 'sk-test-without-quotes'\n                \n            finally:\n                os.unlink(f.name)",
      "function_name": "test_load_env_with_quotes",
      "class_name": "TestConfig"
    },
    {
      "file_path": "/Users/zhibinpan/workspace/meta-agent/tests/unit/test_config.py",
      "line_number": 86,
      "column": 12,
      "handler_type": "try-finally",
      "exception_types": [],
      "has_bare_except": false,
      "has_finally": true,
      "code_snippet": "try:\n                config = Config(f.name)\n                \n                assert config.get('API_KEY') == 'sk-test-123'\n                assert config.get('ANOTHER_KEY') == 'value'\n                \n                # ç¡®ä¿åªæœ‰è¿™ä¸¤ä¸ªé…ç½®\n                all_config = config.list_all()\n                assert len(all_config) == 2\n                \n            finally:\n                os.unlink(f.name)",
      "function_name": "test_skip_comments_and_empty_lines",
      "class_name": "TestConfig"
    },
    {
      "file_path": "/Users/zhibinpan/workspace/meta-agent/tests/unit/test_config.py",
      "line_number": 114,
      "column": 12,
      "handler_type": "try-finally",
      "exception_types": [],
      "has_bare_except": false,
      "has_finally": true,
      "code_snippet": "try:\n                config = Config(f.name)\n                \n                # æµ‹è¯•å­˜åœ¨çš„é”®\n                assert config.get('EXISTING_KEY') == 'existing_value'\n                \n                # æµ‹è¯•ä¸å­˜åœ¨çš„é”®\n                assert config.get('NONEXISTENT_KEY') is None\n                \n                # æµ‹è¯•å¸¦é»˜è®¤å€¼çš„æƒ…å†µ\n                assert config.get('NONEXISTENT_KEY', 'default') == 'default'\n                \n            finally:\n                os.unlink(f.name)",
      "function_name": "test_get_method",
      "class_name": "TestConfig"
    },
    {
      "file_path": "/Users/zhibinpan/workspace/meta-agent/tests/unit/test_config.py",
      "line_number": 137,
      "column": 12,
      "handler_type": "try-finally",
      "exception_types": [],
      "has_bare_except": false,
      "has_finally": true,
      "code_snippet": "try:\n                config = Config(f.name)\n                \n                # æµ‹è¯•å­˜åœ¨çš„å¿…éœ€é”®\n                assert config.require('REQUIRED_KEY') == 'required_value'\n                \n                # æµ‹è¯•ä¸å­˜åœ¨çš„å¿…éœ€é”®\n                with pytest.raises(ConfigError) as exc_info:\n                    config.require('MISSING_REQUIRED_KEY')\n                \n                assert \"ç¼ºå°‘å¿…éœ€çš„é…ç½®\" in str(exc_info.value)\n                \n            finally:\n                os.unlink(f.name)",
      "function_name": "test_require_method",
      "class_name": "TestConfig"
    },
    {
      "file_path": "/Users/zhibinpan/workspace/meta-agent/tests/unit/test_config.py",
      "line_number": 173,
      "column": 12,
      "handler_type": "try-finally",
      "exception_types": [],
      "has_bare_except": false,
      "has_finally": true,
      "code_snippet": "try:\n                config = Config(f.name)\n                \n                # æµ‹è¯•çœŸå€¼\n                assert config.get_bool('TRUE_1') is True\n                assert config.get_bool('TRUE_2') is True\n                assert config.get_bool('TRUE_3') is True\n                assert config.get_bool('TRUE_4') is True\n                assert config.get_bool('TRUE_5') is True\n                assert config.get_bool('TRUE_6') is True\n                \n                # æµ‹è¯•å‡å€¼\n                assert config.get_bool('FALSE_1') is False\n                assert config.get_bool('FALSE_2') is False\n                assert config.get_bool('FALSE_3') is False\n                assert config.get_bool('FALSE_4') is False\n                assert config.get_bool('FALSE_5') is False\n                assert config.get_bool('EMPTY_VALUE') is False\n                \n                # æµ‹è¯•ä¸å­˜åœ¨çš„é”®\n                assert config.get_bool('NONEXISTENT') is False\n                assert config.get_bool('NONEXISTENT', True) is True\n                \n            finally:\n                os.unlink(f.name)",
      "function_name": "test_get_bool_method",
      "class_name": "TestConfig"
    },
    {
      "file_path": "/Users/zhibinpan/workspace/meta-agent/tests/unit/test_config.py",
      "line_number": 211,
      "column": 12,
      "handler_type": "try-finally",
      "exception_types": [],
      "has_bare_except": false,
      "has_finally": true,
      "code_snippet": "try:\n                config = Config(f.name)\n                \n                # æ£€æŸ¥æœ‰æ•ˆé…ç½®åŠ è½½æˆåŠŸ\n                assert config.get('VALID_KEY') == 'valid_value'\n                assert config.get('ANOTHER_KEY') == 'another_value'\n                \n                # æ£€æŸ¥è­¦å‘Šè¾“å‡º\n                captured = capsys.readouterr()\n                assert \"è­¦å‘Š\" in captured.out\n                assert \"æ ¼å¼é”™è¯¯\" in captured.out\n                \n            finally:\n                os.unlink(f.name)",
      "function_name": "test_malformed_line_warning",
      "class_name": "TestConfig"
    },
    {
      "file_path": "/Users/zhibinpan/workspace/meta-agent/tests/unit/test_config.py",
      "line_number": 269,
      "column": 12,
      "handler_type": "try-finally",
      "exception_types": [],
      "has_bare_except": false,
      "has_finally": true,
      "code_snippet": "try:\n                config = Config(f.name)\n                \n                # éªŒè¯DeepSeeké…ç½®\n                assert config.require('DEEPSEEK_API_KEY') == 'sk-da85e6f63dc1462eb575e0d4357ab63e'\n                assert config.get_bool('USE_DEEPSEEK_R1') is True\n                assert config.get('OPENROUTER_API_KEY') == 'sk-or-v1-test'\n                \n            finally:\n                os.unlink(f.name)",
      "function_name": "test_deepseek_config_scenario",
      "class_name": "TestConfigIntegration"
    },
    {
      "file_path": "/Users/zhibinpan/workspace/meta-agent/tests/integration/test_mcp_integration.py",
      "line_number": 75,
      "column": 8,
      "handler_type": "try-finally",
      "exception_types": [],
      "has_bare_except": false,
      "has_finally": true,
      "code_snippet": "try:\n            # é‡ç½®é…ç½®åŠ è½½å™¨ä»¥è§¦å‘é‡æ–°åŠ è½½\n            reset_mcp_config_loader()\n            \n            # æµ‹è¯•åå¤‡é…ç½®\n            mcp_servers = setup_mcp_servers()\n            \n            # éªŒè¯åå¤‡é…ç½®\n            assert isinstance(mcp_servers, dict)\n            assert len(mcp_servers) > 0\n            \n            # éªŒè¯åŒ…å«åŸºæœ¬æœåŠ¡å™¨\n            expected_servers = ['time', 'fetch', 'memory']\n            for server in expected_servers:\n                assert server in mcp_servers\n            \n        finally:\n            # æ¢å¤é…ç½®æ–‡ä»¶\n            if backup_file.exists():\n                backup_file.rename(config_file)",
      "function_name": "test_fallback_behavior_when_config_missing",
      "class_name": "TestMCPIntegration"
    },
    {
      "file_path": "/Users/zhibinpan/workspace/meta-agent/scripts/analyze_code.py",
      "line_number": 21,
      "column": 4,
      "handler_type": "try-except",
      "exception_types": [
        "Exception"
      ],
      "has_bare_except": false,
      "has_finally": false,
      "code_snippet": "try:\n        result = subprocess.run(cmd, capture_output=True, text=True)\n        print(f\"Vultureè¾“å‡º:\\n{result.stdout}\")\n        if result.stderr:\n            print(f\"Vultureé”™è¯¯:\\n{result.stderr}\")\n        return result.stdout\n    except Exception as e:\n        print(f\"è¿è¡Œvultureå¤±è´¥: {e}\")\n        return None",
      "function_name": "run_vulture",
      "class_name": null
    },
    {
      "file_path": "/Users/zhibinpan/workspace/meta-agent/scripts/analyze_code.py",
      "line_number": 37,
      "column": 4,
      "handler_type": "try-except",
      "exception_types": [
        "Exception"
      ],
      "has_bare_except": false,
      "has_finally": false,
      "code_snippet": "try:\n        result = subprocess.run(cmd, capture_output=True, text=True)\n        print(f\"Pyflakesè¾“å‡º:\\n{result.stdout}\")\n        if result.stderr:\n            print(f\"Pyflakesé”™è¯¯:\\n{result.stderr}\")\n        return result.stdout\n    except Exception as e:\n        print(f\"è¿è¡Œpyflakeså¤±è´¥: {e}\")\n        return None",
      "function_name": "run_pyflakes",
      "class_name": null
    },
    {
      "file_path": "/Users/zhibinpan/workspace/meta-agent/scripts/analyze_code.py",
      "line_number": 50,
      "column": 4,
      "handler_type": "try-except",
      "exception_types": [
        "Exception"
      ],
      "has_bare_except": false,
      "has_finally": false,
      "code_snippet": "try:\n        with open(file_path, 'r', encoding='utf-8') as f:\n            content = f.read()\n        \n        tree = ast.parse(content)\n        imports = {'import': [], 'from_import': []}\n        \n        for node in ast.walk(tree):\n            if isinstance(node, ast.Import):\n                for alias in node.names:\n                    imports['import'].append(alias.name)\n            elif isinstance(node, ast.ImportFrom):\n                if node.module:\n                    for alias in node.names:\n                        imports['from_import'].append(f\"{node.module}.{alias.name}\")\n        \n        return imports\n    except Exception as e:\n        print(f\"åˆ†æ {file_path} å¯¼å…¥å¤±è´¥: {e}\")\n        return {'import': [], 'from_import': []}",
      "function_name": "analyze_imports",
      "class_name": null
    },
    {
      "file_path": "/Users/zhibinpan/workspace/meta-agent/scripts/exception_audit.py",
      "line_number": 195,
      "column": 8,
      "handler_type": "try-except",
      "exception_types": [
        "(IndexError, TypeError)"
      ],
      "has_bare_except": false,
      "has_finally": false,
      "code_snippet": "try:\n            if start_line <= len(self.source_lines):\n                if end_line <= len(self.source_lines):\n                    lines = self.source_lines[start_line-1:end_line]\n                else:\n                    lines = self.source_lines[start_line-1:start_line]\n                return '\\n'.join(lines).strip()\n        except (IndexError, TypeError):\n            pass",
      "function_name": "_get_code_snippet",
      "class_name": "ExceptionAuditVisitor"
    },
    {
      "file_path": "/Users/zhibinpan/workspace/meta-agent/scripts/exception_audit.py",
      "line_number": 231,
      "column": 12,
      "handler_type": "try-except",
      "exception_types": [
        "Exception"
      ],
      "has_bare_except": false,
      "has_finally": false,
      "code_snippet": "try:\n                self._analyze_file(file_path)\n            except Exception as e:\n                print(f\"âŒ åˆ†ææ–‡ä»¶å¤±è´¥ {file_path}: {e}\")",
      "function_name": "_scan_directory",
      "class_name": "ExceptionAuditor"
    },
    {
      "file_path": "/Users/zhibinpan/workspace/meta-agent/scripts/exception_audit.py",
      "line_number": 251,
      "column": 8,
      "handler_type": "try-except",
      "exception_types": [
        "SyntaxError",
        "Exception"
      ],
      "has_bare_except": false,
      "has_finally": false,
      "code_snippet": "try:\n            with open(file_path, 'r', encoding='utf-8') as f:\n                source_code = f.read()\n                \n            # è§£æAST\n            tree = ast.parse(source_code, filename=str(file_path))\n            \n            # åˆ›å»ºè®¿é—®å™¨å¹¶éå†AST\n            visitor = ExceptionAuditVisitor(str(file_path), source_code)\n            visitor.visit(tree)\n            \n            # æ”¶é›†ç»“æœ\n            self.all_handlers.extend(visitor.exception_handlers)\n            self.all_fallbacks.extend(visitor.fallback_patterns)\n            \n            if visitor.exception_handlers or visitor.fallback_patterns:\n                print(f\"ğŸ“„ {file_path.relative_to(self.project_root)}: \"\n                      f\"{len(visitor.exception_handlers)} å¼‚å¸¸å¤„ç†, \"\n                      f\"{len(visitor.fallback_patterns)} fallbackæ¨¡å¼\")\n                      \n        except SyntaxError as e:\n            print(f\"âš ï¸ è¯­æ³•é”™è¯¯ {file_path}: {e}\")\n        except Exception as e:\n            print(f\"âŒ å¤„ç†æ–‡ä»¶å¤±è´¥ {file_path}: {e}\")",
      "function_name": "_analyze_file",
      "class_name": "ExceptionAuditor"
    }
  ],
  "fallback_patterns": [
    {
      "file_path": "/Users/zhibinpan/workspace/meta-agent/src/main.py",
      "line_number": 259,
      "column": 4,
      "pattern_type": "conditional-fallback",
      "code_snippet": "model_display = \"DeepSeek-R1æ¨ç†æ¨¡å‹\" if use_r1 else \"DeepSeek-V3ç¨³å®šæ¨¡å‹\"",
      "function_name": "main",
      "class_name": null
    },
    {
      "file_path": "/Users/zhibinpan/workspace/meta-agent/src/ui/helpers.py",
      "line_number": 69,
      "column": 4,
      "pattern_type": "conditional-fallback",
      "code_snippet": "model_info = \"DeepSeek-R1 æ¨ç†æ¨¡å‹\" if use_r1 else \"DeepSeek-V3 ç¨³å®šæ¨¡å‹\"",
      "function_name": "show_welcome",
      "class_name": null
    },
    {
      "file_path": "/Users/zhibinpan/workspace/meta-agent/src/config/prompt_manager.py",
      "line_number": 103,
      "column": 8,
      "pattern_type": "conditional-fallback",
      "code_snippet": "provided_vars = set(variables.keys()) if variables else set()",
      "function_name": "validate_variables",
      "class_name": "PromptManager"
    },
    {
      "file_path": "/Users/zhibinpan/workspace/meta-agent/src/config/mcp_validator.py",
      "line_number": 54,
      "column": 8,
      "pattern_type": "conditional-fallback",
      "code_snippet": "self.schema_path = Path(schema_path) if schema_path else None",
      "function_name": "__init__",
      "class_name": "MCPConfigValidator"
    }
  ],
  "statistics": {
    "handler_types": {
      "try-finally": 20,
      "try-except": 10
    },
    "exception_types": {
      "ValidationError": 3,
      "AssertionError": 1,
      "Exception": 6,
      "(IndexError, TypeError)": 1,
      "SyntaxError": 1
    },
    "fallback_types": {
      "conditional-fallback": 4
    },
    "bare_except_count": 0,
    "finally_block_count": 20
  }
}