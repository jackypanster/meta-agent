# å®˜æ–¹Qwen-Agent MCPé›†æˆ

## æ¦‚è¿°

æ ¹æ®[Qwen-Agentå®˜æ–¹æ–‡æ¡£](https://github.com/QwenLM/Qwen-Agent/blob/main/examples/assistant_qwen3.py)ï¼Œæˆ‘ä»¬å·²ç»æˆåŠŸé›†æˆäº†å®˜æ–¹çš„MCP (Model Context Protocol) æ”¯æŒã€‚

## ğŸ¯ é›†æˆçš„MCPæœåŠ¡

æˆ‘ä»¬ä¸¥æ ¼éµå¾ªå®˜æ–¹æ ‡å‡†ï¼Œåªé›†æˆä»¥ä¸‹ä¸‰ä¸ªMCPæœåŠ¡å™¨ï¼š

### 1. TimeæœåŠ¡å™¨ â°
- **åŠŸèƒ½**: è·å–å½“å‰æ—¶é—´ä¿¡æ¯
- **æ—¶åŒº**: äºšæ´²/ä¸Šæµ·
- **é…ç½®**: 
```json
{
    "command": "uvx",
    "args": ["mcp-server-time", "--local-timezone=Asia/Shanghai"]
}
```
- **ä½¿ç”¨åœºæ™¯**: å½“ç”¨æˆ·è¯¢é—®"ç°åœ¨å‡ ç‚¹"ã€"å½“å‰æ—¶é—´"æ—¶è‡ªåŠ¨è°ƒç”¨

### 2. FetchæœåŠ¡å™¨ ğŸŒ
- **åŠŸèƒ½**: ç½‘é¡µå†…å®¹æŠ“å–
- **ç”¨é€”**: è·å–å®æ—¶ç½‘é¡µä¿¡æ¯
- **é…ç½®**:
```json
{
    "command": "uvx", 
    "args": ["mcp-server-fetch"]
}
```
- **ä½¿ç”¨åœºæ™¯**: å½“ç”¨æˆ·è¦æ±‚"æŠ“å–ç½‘é¡µ"ã€"è·å–ç½‘é¡µå†…å®¹"æ—¶è‡ªåŠ¨è°ƒç”¨

### 3. MemoryæœåŠ¡å™¨ ğŸ’¾
- **åŠŸèƒ½**: å¤–éƒ¨å†…å­˜å­˜å‚¨
- **ç”¨é€”**: æŒä¹…åŒ–æ•°æ®å­˜å‚¨
- **é…ç½®**:
```json
{
    "command": "npx",
    "args": ["-y", "@modelcontextprotocol/server-memory"]
}
```
- **ä½¿ç”¨åœºæ™¯**: å½“ç”¨æˆ·éœ€è¦"å¤–éƒ¨å­˜å‚¨"ã€"æŒä¹…åŒ–æ•°æ®"æ—¶è‡ªåŠ¨è°ƒç”¨

> **æ³¨æ„**: æˆ‘ä»¬å·²ç§»é™¤æ‰€æœ‰éæ ‡å‡†MCPå·¥å…·ï¼Œç¡®ä¿ç³»ç»Ÿçš„ç¨³å®šæ€§å’Œå…¼å®¹æ€§ã€‚

## ğŸ å†…ç½®å·¥å…·

### Code Interpreter
- **åŠŸèƒ½**: Pythonä»£ç æ‰§è¡Œ
- **æ”¯æŒ**: æ•°æ®åˆ†æã€ç»˜å›¾ã€è®¡ç®—
- **è‡ªåŠ¨è°ƒç”¨**: å½“ç”¨æˆ·éœ€è¦ä»£ç æ‰§è¡Œæ—¶

## ğŸš€ ä½¿ç”¨ç¤ºä¾‹

### æ—¶é—´æŸ¥è¯¢
```
ç”¨æˆ·: ç°åœ¨å‡ ç‚¹äº†ï¼Ÿ
åŠ©æ‰‹: [è‡ªåŠ¨è°ƒç”¨timeæœåŠ¡å™¨è·å–å½“å‰æ—¶é—´]
```

### ç½‘é¡µæŠ“å–
```
ç”¨æˆ·: æŠ“å–ç½‘é¡µ https://www.ruanyifeng.com/blog/
åŠ©æ‰‹: [è‡ªåŠ¨è°ƒç”¨fetchæœåŠ¡å™¨è·å–ç½‘é¡µå†…å®¹]
```

### ä»£ç æ‰§è¡Œ
```
ç”¨æˆ·: ç”¨Pythonç”»ä¸€ä¸ªæ­£å¼¦æ³¢å›¾
åŠ©æ‰‹: [è‡ªåŠ¨è°ƒç”¨code_interpreteræ‰§è¡Œç»˜å›¾ä»£ç ]
```

## ğŸ“‹ æŠ€æœ¯å®ç°

### Agenté…ç½®
```python
tools = [
    'custom_save_info', 
    'custom_recall_info', 
    'custom_math_calc',
    {
        'mcpServers': {  # å®˜æ–¹MCPé…ç½®æ ¼å¼
            'time': {
                'command': 'uvx',
                'args': ['mcp-server-time', '--local-timezone=Asia/Shanghai']
            },
            'fetch': {
                'command': 'uvx',
                'args': ['mcp-server-fetch']
            },
            'memory': {
                'command': 'npx',
                'args': ['-y', '@modelcontextprotocol/server-memory']
            }
        }
    },
    'code_interpreter',  # å†…ç½®ä»£ç è§£é‡Šå™¨å·¥å…·
]

agent = Assistant(
    llm=llm_cfg,
    system_message=system_message,
    function_list=tools,
    name='DeepSeekå¢å¼ºç‰ˆAIåŠ©æ‰‹',
    description='åŸºäºDeepSeekæ¨¡å‹çš„æ™ºèƒ½åŠ©æ‰‹ï¼Œæ”¯æŒè®°å¿†ã€è®¡ç®—ã€MCPæœåŠ¡å’Œä»£ç æ‰§è¡ŒåŠŸèƒ½'
)
```

## âœ… ä¼˜åŠ¿

1. **å®˜æ–¹æ”¯æŒ**: ä½¿ç”¨Qwen-AgentåŸç”ŸMCPæ”¯æŒï¼Œç¨³å®šå¯é 
2. **è‡ªåŠ¨è°ƒç”¨**: æ ¹æ®ç”¨æˆ·éœ€æ±‚æ™ºèƒ½é€‰æ‹©åˆé€‚çš„å·¥å…·
3. **ä¸°å¯ŒåŠŸèƒ½**: æ—¶é—´ã€ç½‘é¡µã€å†…å­˜ã€ä»£ç æ‰§è¡Œå…¨è¦†ç›–
4. **æ ‡å‡†åè®®**: éµå¾ªMCPæ ‡å‡†ï¼Œå…¼å®¹æ€§å¥½

## ğŸ”§ ä¾èµ–è¦æ±‚

```bash
# å®‰è£…å®Œæ•´çš„Qwen-AgentåŠŸèƒ½åŒ…
uv add "qwen-agent[gui,rag,code_interpreter,mcp]"
```

## ğŸ“ æ³¨æ„äº‹é¡¹

- MCPæœåŠ¡å™¨ä¼šæ ¹æ®éœ€è¦è‡ªåŠ¨å¯åŠ¨
- ä»£ç æ‰§è¡Œåœ¨æ²™ç›’ç¯å¢ƒä¸­è¿›è¡Œ
- ç½‘é¡µæŠ“å–éµå¾ªrobots.txtè§„åˆ™
- æ—¶é—´æœåŠ¡å™¨ä½¿ç”¨äºšæ´²/ä¸Šæµ·æ—¶åŒº

---

*åŸºäºQwen-Agentå®˜æ–¹ç¤ºä¾‹å®ç°ï¼Œå‚è€ƒ: https://github.com/QwenLM/Qwen-Agent/blob/main/examples/assistant_qwen3.py* 