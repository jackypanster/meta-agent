# ç§æœ‰K8S MCPæœåŠ¡å™¨é…ç½®æŒ‡å—

## ğŸ”’ å®‰å…¨é…ç½®è¯´æ˜

æœ¬æ–‡æ¡£è¯´æ˜å¦‚ä½•å®‰å…¨åœ°é…ç½®ç§æœ‰åŒ–éƒ¨ç½²çš„Kubernetes MCPæœåŠ¡å™¨ï¼Œé¿å…åœ¨å…¬å…±ä»£ç ä»“åº“ä¸­æš´éœ²å†…ç½‘åœ°å€ã€‚

## ğŸ“‹ é…ç½®æ­¥éª¤

### 1. ç¯å¢ƒå˜é‡é…ç½®

åœ¨é¡¹ç›®æ ¹ç›®å½•çš„ `.env` æ–‡ä»¶ä¸­æ·»åŠ ä½ çš„ç§æœ‰K8S MCPæœåŠ¡å™¨åœ°å€ï¼š

```bash
# ç§æœ‰K8S MCPæœåŠ¡å™¨é…ç½®
K8S_MCP=http://your-internal-k8s-cluster:31455/sse
```

**é‡è¦**: `.env` æ–‡ä»¶å·²è¢«gitignoreä¿æŠ¤ï¼Œä¸ä¼šæäº¤åˆ°è¿œç¨‹ä»“åº“ã€‚

### 2. MCPæœåŠ¡å™¨é…ç½®

åœ¨ `config/mcp_servers.json` ä¸­æ·»åŠ K8S MCPæœåŠ¡å™¨é…ç½®ï¼š

```json
{
  "servers": {
    "k8s-mcp": {
      "type": "sse",
      "config": {
        "url": "http://your-internal-k8s-cluster:31455/sse"
      },
      "enabled": true,
      "description": "ç§æœ‰Kubernetesé›†ç¾¤ç®¡ç†MCPæœåŠ¡",
      "category": "kubernetes"
    }
  }
}
```

### 3. åŠ¨æ€é…ç½®åŠ è½½ (æ¨è)

ä¸ºäº†æ›´å¥½çš„å®‰å…¨æ€§ï¼Œå¯ä»¥ä½¿ç”¨ç¯å¢ƒå˜é‡åŠ¨æ€åŠ è½½ï¼š

```json
{
  "servers": {
    "k8s-mcp": {
      "type": "sse", 
      "config": {
        "url": "${K8S_MCP}"
      },
      "enabled": true,
      "description": "ç§æœ‰Kubernetesé›†ç¾¤ç®¡ç†MCPæœåŠ¡",
      "category": "kubernetes"
    }
  }
}
```

## ğŸ›¡ï¸ å®‰å…¨æœ€ä½³å®è·µ

### âœ… å·²å®æ–½çš„å®‰å…¨æªæ–½

1. **`.env` æ–‡ä»¶ä¿æŠ¤**
   - å·²æ·»åŠ åˆ° `.gitignore`
   - ä¸ä¼šè¢«æäº¤åˆ°è¿œç¨‹ä»“åº“
   - åŒ…å«æ‰€æœ‰æ•æ„Ÿé…ç½®

2. **ç¤ºä¾‹æ–‡ä»¶æ¸…ç†**
   - æ‰€æœ‰ç¤ºä¾‹é…ç½®ä½¿ç”¨ `example.com` å ä½ç¬¦
   - æ–‡æ¡£ä¸­ä½¿ç”¨é€šç”¨åœ°å€ç¤ºä¾‹
   - é¿å…çœŸå®å†…ç½‘åœ°å€æ³„éœ²

3. **æ¨¡æ¿åŒ–é…ç½®**
   - æä¾› `env.template` æ¨¡æ¿æ–‡ä»¶
   - å¼€å‘è€…å¯å¤åˆ¶å¹¶å¡«å…¥çœŸå®é…ç½®
   - ä¿æŒä»£ç ä»“åº“æ¸…æ´

### ğŸ” å®‰å…¨æ£€æŸ¥æ¸…å•

- [ ] ç¡®è®¤ `.env` æ–‡ä»¶åœ¨ `.gitignore` ä¸­
- [ ] æ£€æŸ¥æ‰€æœ‰é…ç½®æ–‡ä»¶ä¸­æ— çœŸå®å†…ç½‘åœ°å€
- [ ] éªŒè¯ç¯å¢ƒå˜é‡æ­£ç¡®åŠ è½½
- [ ] æµ‹è¯•MCPæœåŠ¡å™¨è¿æ¥

## ğŸš€ å¯ç”¨æ­¥éª¤

### å½“å‰çŠ¶æ€ (ç­‰å¾…Qwen-Agentä¿®å¤)

ç›®å‰Qwen-Agentæ¡†æ¶å°šæœªå®Œå…¨æ”¯æŒSSEåè®®ï¼Œéœ€è¦ç­‰å¾…å®˜æ–¹PR #597åˆå¹¶ã€‚

### å‡†å¤‡å°±ç»ªåçš„å¯ç”¨æ­¥éª¤

1. **æ›´æ–°Qwen-Agent**
   ```bash
   uv add qwen-agent@latest
   ```

2. **é…ç½®ç¯å¢ƒå˜é‡**
   ```bash
   echo "K8S_MCP=http://your-internal-k8s:31455/sse" >> .env
   ```

3. **å¯ç”¨MCPæœåŠ¡å™¨**
   åœ¨ `config/mcp_servers.json` ä¸­è®¾ç½® `"enabled": true`

4. **æµ‹è¯•è¿æ¥**
   ```bash
   uv run python src/main.py
   ```

## ğŸ“ é…ç½®ç¤ºä¾‹

### SSEåè®®é…ç½®
```json
{
  "k8s-mcp-sse": {
    "type": "sse",
    "config": {
      "url": "${K8S_MCP}"
    },
    "enabled": true,
    "description": "K8Sé›†ç¾¤ç®¡ç† (SSEåè®®)",
    "category": "kubernetes"
  }
}
```

### Streamable HTTPåè®®é…ç½®  
```json
{
  "k8s-mcp-http": {
    "type": "streamable-http",
    "config": {
      "url": "${K8S_MCP_HTTP}"
    },
    "enabled": true,
    "description": "K8Sé›†ç¾¤ç®¡ç† (HTTPåè®®)",
    "category": "kubernetes"
  }
}
```

## ğŸ”— ç›¸å…³æ–‡æ¡£

- [MCPé…ç½®ç³»ç»Ÿæ–‡æ¡£](MCP_CONFIGURATION_SYSTEM.md)
- [SSE Bugè·Ÿè¸ªæ–‡æ¡£](QWEN_AGENT_SSE_BUG_TRACKING.md)
- [å®‰å…¨æŒ‡å—](../SECURITY.md)

---

**æ³¨æ„**: æœ¬æ–‡æ¡£ä¸­çš„æ‰€æœ‰åœ°å€éƒ½æ˜¯ç¤ºä¾‹ï¼Œè¯·æ›¿æ¢ä¸ºä½ çš„å®é™…å†…ç½‘åœ°å€ã€‚ç¡®ä¿ä¸è¦å°†çœŸå®çš„å†…ç½‘åœ°å€æäº¤åˆ°å…¬å…±ä»£ç ä»“åº“ã€‚ 